var testApp=angular.module("testApp",["ngRoute","ngCookies"]);testApp.config(["$routeProvider","$httpProvider",function(o,e){o.when("/login",{templateUrl:"app/template/login.html",controller:"LoginController"}).when("/register",{templateUrl:"app/template/register.html",controller:"RegisterController"}).when("/dashboard",{templateUrl:"app/template/dashboard.html",controller:"DashboardController"}).otherwise("/login"),e.interceptors.push(["$q","$location","$cookies",function(o,e,r){return{request:function(o){return o.headers=o.headers||{},token=r.get("token"),token&&(o.headers.Authorization="Test "+token),o},responseError:function(t){return 401!==t.status&&403!==t.status||(r.remove("token"),e.path("/login")),o.reject(t)}}}])}]),testApp.run(["$rootScope","$location","$cookies",function(o,e,r){o.$on("$locationChangeStart",function(o,t,n){var a=r.get("token");console.log("undefined"==typeof a,t.search("/dashboard")),t.search("/dashboard")!==-1&&(console.log("token",a),"undefined"==typeof a&&e.path("/login")),a&&e.path("/dashboard")})}]),angular.module("testApp").controller("DashboardController",["$scope","$location",function(o,e){console.log("DashboardController")}]),angular.module("testApp").controller("LoginController",["$scope","$location",function(o,e){console.log("LoginController");var r=angular.element(document.body);r.addClass("login")}]),angular.module("testApp").controller("RegisterController",["$scope","$location","$http","$cookies",function(o,e,r,t){console.log("RegisterController");var n=angular.element(document.body);n.addClass("register"),o.user={name:"",email:"",password:"",password_confirmation:""},o.error={name:[],email:[],password:[],password_confirmation:[]},o.submit=function(){for(var n in o.error)o.error[n]=[];r({method:"POST",url:"api/register",data:o.user}).then(function(r){r.data.token?(t.put("token",r.data.token),o.error_data="",e.path("/dashboard")):alert(r.statusText)},function(e){var r=e.data.errors;for(var t in r)for(var n in r[t])o.error[t][o.error[t].length]={msg:r[t][n]}})}}]);
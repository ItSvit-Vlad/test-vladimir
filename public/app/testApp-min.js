var testApp=angular.module("testApp",["ngRoute","ngCookies"]);testApp.config(["$routeProvider","$httpProvider",function(r,o){r.when("/login",{templateUrl:"app/template/login.html",controller:"LoginController"}).when("/register",{templateUrl:"app/template/register.html",controller:"RegisterController"}).when("/dashboard",{templateUrl:"app/template/dashboard.html",controller:"DashboardController"}).otherwise("/login"),o.interceptors.push(["$q","$location","$cookies",function(r,o,e){return{request:function(r){r.headers=r.headers||{};var o=e.get("token");return o&&(r.headers.Authorization="Test "+o),r},responseError:function(t){return 401!==t.status&&403!==t.status||(e.remove("token"),o.path("/login")),r.reject(t)}}}])}]),testApp.run(["$rootScope","$location","$cookies",function(r,o,e){r.$on("$locationChangeStart",function(r,t,a){var n=e.get("token");t.search("/dashboard")!==-1&&"undefined"==typeof n&&o.path("/login"),n&&o.path("/dashboard")})}]),angular.module("testApp").controller("DashboardController",["$scope","$location",function(r,o){console.log("DashboardController")}]),angular.module("testApp").controller("LoginController",["$scope","$location","$http",function(r,o,e){console.log("LoginController");var t=angular.element(document.body);t.addClass("login"),r.user={email:"",password:"",save:""},r.error={email:[],password:[]},r.submit=function(){for(var t in r.error)r.error[t]=[];e({method:"POST",url:"api/login",data:r.user}).then(function(e){e.data.token?($cookies.put("token",e.data.token),r.error_data="",o.path("/dashboard")):alert(e.statusText)},function(o){var e=o.data.errors;for(var t in e)for(var a in e[t])r.error[t][r.error[t].length]={msg:e[t][a]}})}}]),angular.module("testApp").controller("RegisterController",["$scope","$location","$http","$cookies",function(r,o,e,t){console.log("RegisterController");var a=angular.element(document.body);a.addClass("register"),r.user={name:"",email:"",password:"",password_confirmation:""},r.error={name:[],email:[],password:[],password_confirmation:[]},r.submit=function(){for(var a in r.error)r.error[a]=[];e({method:"POST",url:"api/register",data:r.user}).then(function(e){e.data.token?(t.put("token",e.data.token),r.error_data="",o.path("/dashboard")):alert(e.statusText)},function(o){var e=o.data.errors;for(var t in e)for(var a in e[t])r.error[t][r.error[t].length]={msg:e[t][a]}})}}]);
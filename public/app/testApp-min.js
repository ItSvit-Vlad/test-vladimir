var testApp=angular.module("testApp",["ngRoute","ngCookies","angular-jwt","angular-storage","ngSanitize","ui.bootstrap"]);testApp.config(["$routeProvider","$httpProvider","jwtInterceptorProvider",function(o,e,r){o.when("/login",{templateUrl:"app/template/login.html",controller:"LoginController"}).when("/register",{templateUrl:"app/template/register.html",controller:"RegisterController"}).when("/dashboard",{templateUrl:"app/template/dashboard.html",controller:"DashboardController"}).otherwise("/login"),e.interceptors.push(["$q","$location","$cookies",function(o,e,r){return{request:function(o){o.headers=o.headers||{};var e=r.get("token");return e&&(o.headers.Authorization="Bearer "+e),o},responseError:function(t){return 401!==t.status&&403!==t.status||(r.remove("token"),e.path("/login")),o.reject(t)}}}])}]),testApp.run(["$rootScope","$location","$cookies","jwtHelper",function(o,e,r,t){o.$on("$locationChangeStart",function(o,t,a){var n=r.get("token");t.search("/dashboard")!==-1&&"undefined"==typeof n&&e.path("/login"),n&&e.path("/dashboard")})}]),angular.module("testApp").controller("DashboardController",["$scope","$location","$http","$uibModal",function(o,e,r,t){console.log("DashboardController"),o.users={},r({method:"GET",url:"api/contacts"}).then(function(e){console.log(e.data.data),o.users=e.data.data,console.log(o.users)}),o.items=["item1","item2","item3"],o.animationsEnabled=!0,o.open=function(e){t.open({animation:o.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"ModalContent.html",controller:"DashboardController",controllerAs:"$ctrl",size:e,resolve:{items:function(){return o.items}}})},o.cancel=function(){$modalInstance.dismiss()}}]),angular.module("testApp").controller("LoginController",["$scope","$location","$http","$cookies",function(o,e,r,t){console.log("LoginController");var a=angular.element(document.body);a.addClass("login"),o.user={email:"",password:"",save:""},o.error={email:[],password:[],common:[]},o.submit=function(){for(var a in o.error)o.error[a]=[];r({method:"POST",url:"api/login",data:o.user}).then(function(r){r.data.token?(t.put("token",r.data.token),o.error_data="",e.path("/dashboard")):alert(r.statusText)},function(e){var r=e.data.errors;console.log(e);for(var t in r)for(var a in r[t])o.error[t][o.error[t].length]={msg:r[t][a]}})}}]),angular.module("testApp").controller("RegisterController",["$scope","$location","$http","$cookies","$uibModal",function(o,e,r,t,a){console.log("RegisterController");var n=angular.element(document.body);n.addClass("register"),o.user={name:"",email:"",password:"",password_confirmation:""},o.error={name:[],email:[],password:[],password_confirmation:[]},o.submit=function(){for(var a in o.error)o.error[a]=[];r({method:"POST",url:"api/register",data:o.user}).then(function(r){r.data.token?(t.put("token",r.data.token),o.error_data="",e.path("/dashboard")):alert(r.statusText)},function(e){var r=e.data.errors;for(var t in r)for(var a in r[t])o.error[t][o.error[t].length]={msg:r[t][a]}})}}]);
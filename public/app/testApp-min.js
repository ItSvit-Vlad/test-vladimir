var testApp=angular.module("testApp",["ngRoute","ngCookies","angular-jwt","angular-storage","ngSanitize","ui.bootstrap"]);testApp.config(["$routeProvider","$httpProvider","jwtInterceptorProvider",function(o,r,e){o.when("/login",{templateUrl:"app/template/login.html",controller:"LoginController"}).when("/register",{templateUrl:"app/template/register.html",controller:"RegisterController"}).when("/dashboard",{templateUrl:"app/template/dashboard.html",controller:"DashboardController"}).otherwise("/login"),r.interceptors.push(["$q","$location","$cookies",function(o,r,e){return{request:function(o){o.headers=o.headers||{};var r=e.get("token");return r&&(o.headers.Authorization="Bearer "+r),o},responseError:function(t){return 401!==t.status&&403!==t.status||(e.remove("token"),r.path("/login")),o.reject(t)}}}])}]),testApp.run(["$rootScope","$location","$cookies","jwtHelper",function(o,r,e,t){o.$on("$locationChangeStart",function(o,t,a){var n=e.get("token");t.search("/dashboard")!==-1&&"undefined"==typeof n&&r.path("/login"),n&&r.path("/dashboard")})}]),angular.module("testApp").controller("DashboardController",["$scope","$location","$http",function(o,r,e){console.log("DashboardController");o.items=["item1","item2","item3"],o.animationsEnabled=!0,o.open=function(r){$uibModal.open({animation:o.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$ctrl",size:r,resolve:{items:function(){return o.items}}})}}]),angular.module("testApp").controller("LoginController",["$scope","$location","$http","$cookies",function(o,r,e,t){console.log("LoginController");var a=angular.element(document.body);a.addClass("login"),o.user={email:"",password:"",save:""},o.error={email:[],password:[],common:[]},o.submit=function(){for(var a in o.error)o.error[a]=[];e({method:"POST",url:"api/login",data:o.user}).then(function(e){e.data.token?(t.put("token",e.data.token),o.error_data="",r.path("/dashboard")):alert(e.statusText)},function(r){var e=r.data.errors;console.log(r);for(var t in e)for(var a in e[t])o.error[t][o.error[t].length]={msg:e[t][a]}})}}]),angular.module("testApp").controller("RegisterController",["$scope","$location","$http","$cookies","$uibModal",function(o,r,e,t,a){console.log("RegisterController");var n=angular.element(document.body);n.addClass("register"),o.user={name:"",email:"",password:"",password_confirmation:""},o.error={name:[],email:[],password:[],password_confirmation:[]},o.submit=function(){for(var a in o.error)o.error[a]=[];e({method:"POST",url:"api/register",data:o.user}).then(function(e){e.data.token?(t.put("token",e.data.token),o.error_data="",r.path("/dashboard")):alert(e.statusText)},function(r){var e=r.data.errors;for(var t in e)for(var a in e[t])o.error[t][o.error[t].length]={msg:e[t][a]}})}}]);
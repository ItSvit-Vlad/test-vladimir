var testApp=angular.module("testApp",["ngRoute","ngCookies"]);testApp.config(["$routeProvider","$httpProvider",function(o,r){o.when("/login",{templateUrl:"app/template/login.html",controller:"LoginController"}).when("/register",{templateUrl:"app/template/register.html",controller:"RegisterController"}).when("/dashboard",{templateUrl:"app/template/dashboard.html",controller:"DashboardController"}).otherwise("/login"),r.interceptors.push(["$q","$location","$cookies",function(o,r,e){return{request:function(o){o.headers=o.headers||{};var r=e.get("token");return r&&(o.headers.Authorization="Bearer "+r),o},responseError:function(t){return 401!==t.status&&403!==t.status||(e.remove("token"),r.path("/login")),o.reject(t)}}}])}]),testApp.run(["$rootScope","$location","$cookies",function(o,r,e){o.$on("$locationChangeStart",function(o,t,n){var a=e.get("token");t.search("/dashboard")!==-1&&"undefined"==typeof a&&r.path("/login"),a&&r.path("/dashboard")})}]),angular.module("testApp").controller("DashboardController",["$scope","$location","$http",function(o,r,e){console.log("DashboardController"),e({method:"GET",url:"api/user"}).then(function(o){console.log(o)},function(o){console.log(o)}),e({method:"GET",url:"api/contacts"}).then(function(o){console.log(o)},function(o){console.log(o)})}]),angular.module("testApp").controller("LoginController",["$scope","$location","$http","$cookies",function(o,r,e,t){console.log("LoginController");var n=angular.element(document.body);n.addClass("login"),o.user={email:"",password:"",save:""},o.error={email:[],password:[],common:[]},o.submit=function(){for(var n in o.error)o.error[n]=[];e({method:"POST",url:"api/login",data:o.user}).then(function(e){e.data.token?(t.put("token",e.data.token),o.error_data="",r.path("/dashboard")):alert(e.statusText)},function(r){var e=r.data.errors;console.log(r);for(var t in e)for(var n in e[t])o.error[t][o.error[t].length]={msg:e[t][n]}})}}]),angular.module("testApp").controller("RegisterController",["$scope","$location","$http","$cookies",function(o,r,e,t){console.log("RegisterController");var n=angular.element(document.body);n.addClass("register"),o.user={name:"",email:"",password:"",password_confirmation:""},o.error={name:[],email:[],password:[],password_confirmation:[]},o.submit=function(){for(var n in o.error)o.error[n]=[];e({method:"POST",url:"api/register",data:o.user}).then(function(e){e.data.token?(t.put("token",e.data.token),o.error_data="",r.path("/dashboard")):alert(e.statusText)},function(r){var e=r.data.errors;for(var t in e)for(var n in e[t])o.error[t][o.error[t].length]={msg:e[t][n]}})}}]);